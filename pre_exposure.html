<!DOCTYPE html>
<html>
    <head>
        <title>Pre Exposure</title>
        <script src='jatos.js'></script>
        <script src='./jspsych-6.3.1/jspsych.js'></script>        
        <script src='./extra_functions/lodash.js'></script>
        <script src = './extra_functions/jquery-3.4.1.js' type='text/javascript'></script>
        <script src="./extra_functions/jspsych-triplets-keyboard-response.js"></script>
        <script src="./jspsych-6.3.1/plugins/jspsych-preload.js"></script>
        <link href='./jspsych-6.3.1/css/jspsych.css' rel='stylesheet' type='text/css'></link>
        <link href='./extra_files/custom.css' rel='stylesheet' type='text/css'></link>
    </head>
    
    <body></body>
    
    <script>
      jatos.onLoad(function() {
            var trial = {
                type: 'triplets-keyboard-response',
                query_stimulus: jsPsych.timelineVariable('query_stimulus'),
                ref1_stimulus: jsPsych.timelineVariable('ref1_stimulus'),
                ref2_stimulus: jsPsych.timelineVariable('ref2_stimulus'),
                ref1_y_offset: jsPsych.timelineVariable('ref1_y_offset'),
                ref2_y_offset: jsPsych.timelineVariable('ref2_y_offset'),
                stimulus_height: 400,
                choices: ['1','2'],
                trial_duration: 5000,
                post_trial_gap: 500,
            }
            
            // Preload trial
            var preload_trial = {
                type: 'preload',
                images: jatos.studySessionData.inputData.all_exemplars
            }

            var session_procedure = {
                timeline: [preload_trial,trial],
                timeline_variables: jatos.studySessionData.inputData.pre_exposure_trials
            }

            jsPsych.init({
                
                timeline: [session_procedure],  
                
                on_finish: function(data) {
                    console.log('Over');
                    jsPsych.data.displayData('json');
                }       
            });

                // ///////////////////////////////////////////////////////////////////////////////////////////////
                //////////////////////////////////////////////////////////////////////////////////////////////////
        }); // jatos on load

    </script>
</html>
