<!DOCTYPE html>
<html>
    <head>
        <title>Determine condition2</title>
        <script src='jatos.js'></script>
        <script src='./jspsych-6.3.1/jspsych.js'></script>        
        <script src='./extra_functions/lodash.js'></script>
        <script src='./extra_functions/trial_creator.js'></script>
        <script src='./extra_functions/math.js'></script>
        <script src = './extra_functions/jquery-3.4.1.js' type='text/javascript'></script>
        <link href='./jspsych-6.3.1/css/jspsych.css' rel='stylesheet' type='text/css'></link>
        <link href='./extra_files/custom.css' rel='stylesheet' type='text/css'></link>
    </head>
    <body></body>
    <script>

    jatos.onLoad(function() {
        debugger
        // Define all the conditions here ///////////////////////////////////////////////////////////
        var timeline = []

        jatos.studySessionData.inputData = {}
        jatos.studySessionData.outputData = {}

        jatos.studySessionData.inputData.curr_session = 0
        
        // Pre-exposure task stimuli
        jatos.studySessionData.inputData.pre_exposure = {
            query: [1,2,3],
            ref1:  [4,5,6],
            ref2:  [7,8,9],
            n_reps: 2
        }

        // Create the pre-exposure trials
        jatos.studySessionData.inputData.pre_exposure_trials = trial_creator(jatos.studySessionData.inputData.pre_exposure)

 

		jsPsych.init({
			
			timeline: timeline,

			on_finish: function(data) {

                


                // Make JATOS remember that this session was run
                jatos.studySessionData.latestFinishedComponentId    = jatos.componentId;
                jatos.studySessionData.latestFinishedComponentPos   = jatos.componentPos;
                jatos.studySessionData.latestFinishedComponentTitle = jatos.componentProperties.title;

                jatos.submitResultData("[conditions_start---" + 
                JSON.stringify(jatos.studySessionData) + "---conditions_end]", function(){jatos.startComponentByPos(3)});

			} // on finish
		});     // jsPsych.init   

    }); // jatos on load

    </script>
</html>
